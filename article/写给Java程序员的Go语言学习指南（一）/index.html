<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="写给Java程序员的Go语言学习指南（一）, 代码段小站">
    <meta name="description" content="Hello我的读者们（假装有）好久不见，作为一个Javaer转Gopher已经有一段时间了，近期打算写一个对Java程序员友好的转型Go语言的系列文章（说不定有些人有这个需求呢），因为没有系统学习过Go语言，所以写这个系列的目的还包括巩固一">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>写给Java程序员的Go语言学习指南（一） | 代码段小站</title>
    <link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="/favicon.ico">
    
    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <link rel="stylesheet" type="text/css" href="/libs/prism/prism.css">
    <script src="/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/rss2.xml" title="代码段小站" type="application/rss+xml">
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/code.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">代码段小站</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/runcode" class="waves-effect waves-light">
      
      <i class="fas fa-code" style="zoom: 0.6;"></i>
      
      <span>写代码</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/code.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">代码段小站</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/runcode" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-code"></i>
			
			写代码
		</a>
          
        </li>
        
        
    </ul>
</div>

        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/14.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">写给Java程序员的Go语言学习指南（一）</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/GoLang/">
                                <span class="chip bg-color">GoLang</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="post-category">
                                编程语言
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-11-01
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    7.3k
                </div>
                

                
				
                
            </div>
            
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>Hello我的读者们（假装有）好久不见，作为一个Javaer转Gopher已经有一段时间了，近期打算写一个对Java程序员友好的转型Go语言的系列文章（说不定有些人有这个需求呢），因为没有系统学习过Go语言，所以写这个系列的目的还包括巩固一下自己的Go语言基础，目前我还是一个Go语言新手，所以我的一些理解不一定正确，如果我以后对这个系列中提到的内容有了更深的理解，会回来修订的。</p>
<p>这个系列的目标读者是有一定编程基础的Java码农，因此我在后面讲Go语言基础的时候不会详尽的讲一些所有编程语言中都较普遍的语法，而倾向于讲Go中的特色语法，并将其和Java进行比较，带你快速上手Go。</p>
<p>另外，作为一个已经工作了的社会人儿~以后的文章会偏原创的，尽量写我参阅官方文档和实际工作中学到的内容，避免总是借鉴别人的内容。</p>
<p>那么进入正题，首先，当我们初学一门技术的时候，都得了解清楚这门技术的优缺点，明白我们为什么需要学习这门技术。</p>
<p>所以，同样的，让我们先来解决这个问题：<strong>为什么要学习Go语言?</strong></p>
<h1 id="为什么要学习Go语言">1 为什么要学习Go语言</h1><h2 id="Go语言的介绍">1.1 Go语言的介绍</h2><p>首先，Go语言是一门高级语言，并且是一门<strong>服务端语言</strong>，这是最基础的，可以拿它和Java、Python这样的语言进行比较，但不太适合将其与SHELL、JavaScript、C这类语言进行比较。</p>
<p>Go语言也是一门<code>C-like</code>语言，这是指它属于<code>C-family</code>中的一员，是C语言的衍生语言。但我个人觉得Go语言的语言和C、Java并不是非常相似，特别是当你遇到没有while、变量名在类型前、面向接口编程等语法特性时，可能需要好好适应一会儿。</p>
<p>所以，既然有这么多后端语言了，我们为什么还要学习Go语言呢，下面就来看看Go语言的一些特点。</p>
<h2 id="Go语言的特点">1.2 Go语言的特点</h2><h3 id="语法简单">1.2.1 语法简单</h3><p>Go语言相比起其他面向对象的语言少了很多高级特性，例如不存在泛型、没有继承、没有如Java一般诸多内建的工具类、集合类，也没有如Python一些非常简化的语法如列表生成式、map-reduce。在某些观点中，这些高级特性有时会使代码变得臃肿、可读性降低，而<strong>Go的语法非常简单，除了作为一门编程语言最基本的流程控制、变量声明、运算操作之外，其他的功能并没有太多，这使得Go代码的可读性较好，但同样会造成一些不方便。</strong></p>
<p>智者见仁，仁者见智，有些人也觉得Go语言的代码可读性差，关于这点，你可以看下面几篇我的leetcode刷题笔记，比较一下Java、Go、Python的写法各具有什么特点。</p>
<ul>
<li><a href="../leetcode1-%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C">leetcode1-两数之和</a></li>
<li><a href="../leetcode2-%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0">leetcode2-两数相加</a></li>
</ul>
<h2 id="轻量的协程支持">1.3 轻量的协程支持</h2><p>Go语言的并发模型也是Go语言引以为傲的特性之一。</p>
<p>关于协程（coroutinue）是什么，可以看我的另一篇笔记<a href="../%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%AC%E4%B8%89%E7%89%88%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B012">深入理解java虚拟机第三版读书笔记12</a>，通俗来说，协程就是由应用程序模拟的线程（用户级线程），操作系统感知不到协程的存在，协程比线程更轻量，由于是应用程序实现的调度模型，因此协程间的调度不需要经过内核，也不需要频繁的两态转换。</p>
<p>在Go语言中，协程是内建支持的，并且创建一个协程的方法也非常简单，仅需一个关键词<code>go</code>：</p>
<iframe src="https://run.codetool.top/?id=40" frameborder="0" height="500" style="width:100%;border:1px solid #ccc;"></iframe>

<h2 id="跨平台的编译">1.4 跨平台的编译</h2><p>Go语言使用了提前编译（Ahead of Time，AOT）的技术，因此Go语言程序在运行时是很快的。但是AOT有个问题就是只能编译成指定平台的机器码，无法“一次编译，到处运行”。</p>
<p>那么这里说的“跨平台”的编译是指什么呢？默认我们使用<code>go build</code>编译出来的可执行文件都是当前操作系统可执行的文件，但假如我想在windows下编译一个linux下可执行文件，可以这样做：</p>
<pre class="language-none"><code class="language-none">SET CGO_ENABLED&#x3D;0  &#x2F;&#x2F; 禁用CGO
SET GOOS&#x3D;linux  &#x2F;&#x2F; 目标平台是linux
SET GOARCH&#x3D;amd64  &#x2F;&#x2F; 目标处理器架构是amd64

go build</code></pre>

<blockquote>
<p>CGO是Go语言提供的一个能够在go代码中直接调用C的库函数的功能，使用了CGO的代码是不支持跨平台编译的</p>
</blockquote>
<p>可以看到，只需要指定目标操作系统的平台和处理器架构，即可实现“跨平台”地编译Go语言可执行文件。</p>
<p>其他的例子：</p>
<ol>
<li>Mac 下编译 Linux 和 Windows平台 64位 可执行程序：</li>
</ol>
<pre class="language-none"><code class="language-none">&#x2F;&#x2F; linux
CGO_ENABLED&#x3D;0 GOOS&#x3D;linux GOARCH&#x3D;amd64 
go build
&#x2F;&#x2F; windows
CGO_ENABLED&#x3D;0 GOOS&#x3D;windows GOARCH&#x3D;amd64 
go build</code></pre>

<ol start="2">
<li>Linux 下编译 Mac 和 Windows 平台64位可执行程序：</li>
</ol>
<pre class="language-none"><code class="language-none">&#x2F;&#x2F; mac
CGO_ENABLED&#x3D;0 GOOS&#x3D;darwin GOARCH&#x3D;amd64 
go build
&#x2F;&#x2F; windows
CGO_ENABLED&#x3D;0 GOOS&#x3D;windows GOARCH&#x3D;amd64 
go build</code></pre>

<ol start="3">
<li>Windows下编译Mac平台64位可执行程序：</li>
</ol>
<pre class="language-none"><code class="language-none">SET CGO_ENABLED&#x3D;0
SET GOOS&#x3D;darwin
SET GOARCH&#x3D;amd64
go build</code></pre>

<h1 id="安装-amp-Go指令">2 安装 &amp; Go指令</h1><h2 id="安装">2.1 安装</h2><p>安装当然是去官网下载了：<a target="_blank" rel="noopener" href="https://golang.google.cn/dl/">https://golang.google.cn/dl/</a> ，如果这个网站打不开，可以找国内的一些镜像资源站进行下载。</p>
<p>这个系列使用的Go语言版本是1.14.7，希望读者尽量选用比这个版本或更高版本。</p>
<p>作为一个Java码农，安装对你肯定不是问题了，但重要的是在安装完Go之后有几个环境变量需要配置（Go的特色）：</p>
<ul>
<li>GoRoot：Go的安装目录</li>
<li>GoPath：Go的工作区目录，建议自己建一个</li>
</ul>
<p>可以参考一下我MacOS上的配置：</p>
<pre class="language-none"><code class="language-none">GOPATH&#x3D;&#x2F;Users&#x2F;rhett&#x2F;go_repos
GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go</code></pre>

<h2 id="Go指令">2.2 Go指令</h2><p>Go指令当然要看官方的帮助文档了：</p>
<pre class="language-none"><code class="language-none"># go
Go is a tool for managing Go source code.

Usage:

	go &lt;command&gt; [arguments]

The commands are:

	bug         start a bug report
	build       compile packages and dependencies
	clean       remove object files and cached files
	doc         show documentation for package or symbol
	env         print Go environment information
	fix         update packages to use new APIs
	fmt         gofmt (reformat) package sources
	generate    generate Go files by processing source
	get         download and install packages and dependencies
	install     compile and install packages and dependencies
	list        list packages or modules
	mod         module maintenance
	run         compile and run Go program
	test        test packages
	tool        run specified go tool
	version     print Go version
	vet         report likely mistakes in packages</code></pre>

<p>这里不详细讲各个指令了（说不定之后会单独写一篇文章来讲这些指令），使用<code>go help [command]</code>都可以看到对应的帮助文档，后面我们也会常常用到一些指令。</p>
<h1 id="Go语言的HelloWorld">3 Go语言的HelloWorld</h1><p>又到了我最喜欢的入门经典HelloWorld环节，直接上代码：</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hello world!"</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<iframe src="https://run.codetool.top/?id=42" frameborder="0" height="500" style="width:100%;border:1px solid #ccc;"></iframe>

<p>其中：</p>
<ul>
<li>package 语句声明当前文件所属的包</li>
<li>import 语句用于引入包，这里fmt是一个内建包</li>
<li>func 声明函数</li>
<li>fmt.Println 是Go语言中的输出语句，借助了内建包fmt的功能。</li>
</ul>
<p>现在我还没有提到Go语言的IDE，那么在不借助IDE的条件下，我来教你如何运行起这样一个Go代码文件：</p>
<p>假设你已经向一个名为<code>main.go</code>的文件中写入了这段代码，当你的文件不在GoPath目录及其子目录下的时候，可以使用<code>go run [文件名]</code>直接编译+运行这个程序：</p>
<pre class="language-none"><code class="language-none"># go run main.go
hello world!</code></pre>

<p>或者你可以先编译再运行：</p>
<pre class="language-none"><code class="language-none"># go build main.go
# .&#x2F;main
hello world!</code></pre>

<p>你也许已经发现，<code>go build</code>得到的产物就是一个可执行文件。</p>
<p>你也可以使用类似GCC的语法为编译产物取个名字：</p>
<pre class="language-none"><code class="language-none"># go build -o helloworld main.go
# .&#x2F;helloworld
hello world!</code></pre>

<h1 id="Go语言常见FAQ（持续更新翻译）">4 Go语言常见FAQ（持续更新翻译）</h1><p>学习任何一门语言时，其官方文档才是最权威的，对于Go语言来说，我觉得学习Go语言必读的是官网的<a target="_blank" rel="noopener" href="https://golang.org/doc/faq">FAQ list</a>，里面阐述了Go语言的设计理念和设计思想，也解决了一些初学者容易产生的误区。</p>
<p>这里列出的FAQ，作为初学者不一定需要立刻看完，尤其是除了设计理念的后面的一些问题，我的建议是学完了Go预言的基本语法之后，可以回来看一看这部分内容。</p>
<p>下面翻译一些我觉得特别重要的Q&amp;A：</p>
<h2 id="Go语言设计的指导原则是什么？">4.1 Go语言设计的指导原则是什么？</h2><p>在设计Go语言之初，Java和C++是在Google内部最常用的服务端语言。我们认为这些语言（Java和C++）具有过多需要重复记忆的教条。一些程序员希望转向高效、流畅的语言（如Python），但代价是失去效率和类型安全。我们觉得应该用一种语言就能兼顾效率，安全性和流畅性。</p>
<p>Go语言尝试减少关键字的数量和含义。在整个设计过程中，我们试过减少复杂性：没有前向声明，也没有头文件；一切都只被声明一次。初始化语句的表达力强，且易于使用。关键字的语法简洁明了。复杂的变量声明例如<code>foo.Foo* myFoo = new(foo.Foo)</code>通过使用<code>:=</code>这个声明并初始化的操作符被简化。并且或许最根本是，Go语言中没有类型层次（继承）：一个类型只能是它自己，而不必去声明它和其他类型的关系。通过这些简化，Go可以在不牺牲设计的精巧性的前提下变得具有表现力并易于理解。</p>
<p>另一个重要的设计原则是保持类型概念的正交【博主注：正交性，由Orthogonality翻译而来，这里可以理解为类型之间的独立性，降低耦合度】。可以为任何类型实现接口方法；结构体代表数据，而接口代表抽象，等等。正交性使人们更容易理解当一些类型组合时代表了什么。</p>
<h2 id="Unicode标识符是怎么回事？">4.2 Unicode标识符是怎么回事？</h2><p>在设计Go语言时，我们要确保它不是以ASCII码为中心的，这意味着要扩展一些语言标识符限于7位ASCII范围的空间。目前Go语言的规则（标识符字符必须是Unicode定义的字符或数字）易于理解和实现，但有一定的限制。例如，组合字符不被允许，并且排除了某些语言，例如梵文。</p>
<p>这条规则还有另一个问题。由于在Go语言中exported（包外可见）的标识符必须以大写字母开头，因此，不能使某些语言的字符组成的标识符exported。目前唯一的解决方案是使用<code>X日本語</code>这样的形式，这显然不能令人满意。</p>
<p>自从Go语言的最早版本发布以来，我们就一直在思考如何最好地扩展标识符空间以兼容不同地区的程序员可以使用他们自己的语言。确切地说，这个问题如何解决仍然是讨论的活跃话题，并且Go语言的未来版本在标识符定义方面可能会更加宽松。例如，它可能会采用<a target="_blank" rel="noopener" href="http://unicode.org/reports/tr31/">Unicode组织关于标识符的建议</a>中的一些想法。但是无论发生什么情况，都必须在兼容（或扩展）字母大小写确定标识符可见性的方式下完成，这仍然是Go最受欢迎的功能之一。</p>
<p>目前，我们有一个简单的规则，可以在以后扩展而又不会破坏旧代码的兼容性，该规则修复了因允许歧义标识符的规则而引起的bug。</p>
<hr>
<p>理解：Go语言的标识符不受限于ascii字符，可以使用很多语言的字符，但没有必要。</p>
<h2 id="为什么Go语言没有泛型">4.3 为什么Go语言没有泛型</h2><p>在某个时间点我们可能会添加泛型的支持。即使有些程序员觉得这是一件紧急的事，但我们并不觉得。</p>
<p>Go语言的目标是编写出长时间易维护的服务端程序。其设计集中在伸缩性，可读性和并发性等方面。当时，多态编程对于实现该语言的目标似乎并不重要，因此为了简单起见而被略去。</p>
<p>Go语言现在已经更加成熟，可以考虑实现某种形式的泛型编程。但是，仍然存在一些警告。</p>
<p>泛型很方便，但是它以类型系统和runtime的复杂性为代价。我们一直在思考但始终尚未找到一种能平衡其带来的价值与复杂度之间的方案。同时，Go语言内置的map和slice以及其能够使用<code>interface&#123;&#125;</code>构造容器的能力（带有显式拆箱），意味着一些情况下它能写出和泛型能实现的功能相似的代码（可能不是那么平滑）。</p>
<p>这个话题保持open状态。要查看之前Go语言尝试过的设计泛型编程的失败案例，请参阅<a target="_blank" rel="noopener" href="https://github.com/golang/go/issues/15292">此提案</a>。</p>
<h2 id="为什么Go语言没有异常？">4.4 为什么Go语言没有异常？</h2><p>我们认为如同<code>try-catch-finally</code>这种习惯用法将异常耦合到逻辑控制结构会导致代码混乱。它还有鼓励程序员将许多常见的错误（例如无法打开文件）标记为异常的倾向。</p>
<p>Go语言采用了不同的错误处理方法。对于简单的错误处理，Go的多返回值会使报告错误变得容易，而不需要返回值重载。规范的<code>error</code>类型，与Go语言的其他一些特性相结合，能使错误处理令人愉悦，同时与其他语言完全不同。</p>
<p>Go还具有一些内建函数，可以发出信号并从真正“异常”的状况中恢复（recover）。恢复（recover）机制仅在发生错误后被破坏的一部分函数状态中执行，该机制足以处理灾难，但不需要任何额外的控制结构，如果使用得当，可以生成整洁干净的错误处理代码。</p>
<p>相关详细信息，请参见<a target="_blank" rel="noopener" href="https://golang.org/doc/articles/defer_panic_recover.html">Defer, Panic, and Recover</a>。另外，<a target="_blank" rel="noopener" href="https://blog.golang.org/errors-are-values">Errors are values</a>这篇博客文章描述了Go语言中错误即为值对象从而可以在错误处理中发挥的巨大作用。</p>
<h2 id="为什么基于CSP的思想设计Go语言中的并发？">4.5 为什么基于CSP的思想设计Go语言中的并发？</h2><p>并发和多线程编程长时间因其难以学习而闻名，我们认为其中一部分原因是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/POSIX_Threads">pthreads</a>这样复杂的设计造成的，另一部分原因则是过于强调互斥锁、条件变量、内存屏障这样的底层细节。即使底层有这些互斥锁，更高层次的语言接口应该能写出更简单的代码。</p>
<p>Hoare设计的CSP（Communicating Sequential Processes）模型是为高级语言提供并发支持的最成功模型之一。Occam和Erlang是基于CSP思想设计的两种最知名的语言。Go的并发原语来自贡献出将channel作为最高等对象的重要思想的家族树的不同分支（不知道咋翻译，原句：<code>Go&#39;s concurrency primitives derive from a different part of the family tree whose main contribution is the powerful notion of channels as first class objects.</code>）。几种早期语言的经验表明，CSP模型非常适合过程语言框架。</p>
<h2 id="为什么用goroutine代替线程？">4.6 为什么用goroutine代替线程？</h2><p>Goroutines是为了让并发编程更易于使用做出的努力之一。有一个存在了一段时间的想法是，将一个独立执行的函数协程服用到一组线程上去。当一个协程阻塞时, 例如通过一个产生阻塞的系统调用, runtime会自动将同一线程中其他协程转移到另一个runnable的线程中，这样它们就不会被阻塞，而程序员看不到这些底层实现。这样会使我们使用goroutine的成本很低：它们在栈上的开销很小，通常只有几kb。</p>
<p>为了使栈空间使用更少, Go语言的runtime使用可扩容的、与goroutine绑定的私有栈。 新创建的goroutine只会被分配几个kb, 而这通常已足够使用。当这些空间不够时， runtime会自动扩容（缩容）内存以容纳栈空间，这容许许多goroutine共存于现代容量巨大的内存中。每个函数调用的CPU开销平均只有三条简单的指令，在同一片内存空间创建成百上千的goroutine是十分有用的。如果不用goroutine而是使用线程, 系统资源会被更容易消耗殆尽。</p>
<h2 id="Go是一门面向对象的语言吗？">4.7 Go是一门面向对象的语言吗？</h2><p>可以说是或者不是。尽管Go语言的类型和方法允许面向对象风格的编程, 但没有类型层级（继承）。Go语言中“接口”的概念提供了一种我们认为更易使用并在某种程度上更通用的使用方法。Go语言有一些方法可以将类型嵌入到其他类型中，以实现类似（但不完全相同）其他语言中继承的功能。还有, Go语言的方法比C++或Java中的更通用：它们可以为任何数据类型定义, 例如“拆箱”的整数这样的内置的类型。方法的实现并不限定在结构体（类）中。</p>
<p>并且，Go语言中缺少类型继承导致Go中的”对象“比C++、Java中的更轻量。</p>
<h2 id="怎样能够动态分派方法呢？">4.8 怎样能够动态分派方法呢？</h2><p>Go语言中只有一种途径可以动态分派方法：通过接口。结构体或其他确定的类型的方法总是静态解析的。</p>
<h2 id="为什么Go语言不支持重载方法或操作符？">4.9 为什么Go语言不支持重载方法或操作符？</h2><p>如果不去做类型匹配，方法分派会非常简单。其他语言的经验告诉我们大量相同名称但不同方法签名的函数有时会很有用，但在实践中可能会造成混淆。仅通过名称匹配并要求类型一致是一个主要使得Go类型系统简化的决定。</p>
<p>至于操作符重载, 貌似其必要性不超过其便利性。没有它，语言能更加简化。</p>
<h2 id="可以将-T转换为-interface-吗？">4.10 可以将[]T转换为[]interface{}吗？</h2><p>不能直接转换，没有相同内存指向的类型直接转换是不符合语言规范的。单有必要单独地将原切片中的元素逐一地复制到目标切片中去。例如下面这段代码将<code>int</code>切片复制到<code>interface&#123;&#125;</code>切片中去：</p>
<pre class="language-go" data-language="go"><code class="language-go">t <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span>
s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> t <span class="token punctuation">&#123;</span>
    s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="如果T1和T2所指同一个类型，可以将-T1转换为-T2吗？">4.11 如果T1和T2所指同一个类型，可以将[]T1转换为[]T2吗？</h2><p>下面这段例子中最后一行代码是不能编译的：</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> T1 <span class="token builtin">int</span>
<span class="token keyword">type</span> T2 <span class="token builtin">int</span>
<span class="token keyword">var</span> t1 T1
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">T2</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token comment">// OK</span>
<span class="token keyword">var</span> st1 <span class="token punctuation">[</span><span class="token punctuation">]</span>T1
<span class="token keyword">var</span> sx <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>T2<span class="token punctuation">)</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span> <span class="token comment">// NOT OK</span></code></pre>

<p>Go语言中，类型是紧密绑定到方法的, 每个命名类型都有属于自己的一个方法集合（可能是空的）。 大体上的规则是，你可以改变转换后的类型名称（同时也会改变它的方法集合），但你不能改变一个集合类型中元素的类型名和方法集合. 并且Go语言要求显式的类型转换。</p>
<h2 id="为什么error的nil值不等于nil">4.12 为什么error的nil值不等于nil?</h2><p>在底层, 接口被实现为两个部分, 一个类型T和值V。V是一个确定的值例如整数、结构体或指针, 但不会是接口本身, 并且有一个类型T。举个例子，如果我们在接口中存储一个整数3, 最终的接口值为 <code>T=int, V=3</code>。值V也被称为接口的动态值，鉴于在程序执行过程中，一个给定的接口变量在不同时间可能会有不同的值V。</p>
<p>仅当V和T都没有设定时，一个接口值才是nil（<code>T=nil, V is not set</code>），特别的，一个nil接口总是有一个nil类型。如果我们存储一个<code>*int</code>类型的nil指针在接口中, 内部类型仍会为<code>*int</code>而不管值V是什么（<code>T=*int, V=nil</code>）。因为这样一个接口即使其值V为nil，它也可以不是一个nil。</p>
<p>这样的情形可能会变得令人疑惑，特别是一个nil存储在接口例如error中进行返回：</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">returnsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> p <span class="token operator">*</span>MyError <span class="token operator">=</span> <span class="token boolean">nil</span>
	<span class="token keyword">if</span> <span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		p <span class="token operator">=</span> ErrBad
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> p <span class="token comment">// Will always return a non-nil error.</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>如果一切顺利，这个函数会返回一个nil p，于是这个返回值是容纳在一个error接口中的 (T=*MyError, V=nil)。这意味着如果调用者将这个返回的error与nil比较，看起来似乎总会是有错误发生，即使实际一切正常。为了返回一个正确的nil error给调用者，这个函数必须返回一个显式的nil：</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">returnsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">if</span> <span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> ErrBad
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在函数中返回错误，为了保证错误被正确创建，在方法签名中使用error类型代替一个精确的错误类型（例如<code>*MyError</code>）总是一个好的实践（就像我们上面做的那样）。举个例子, <a target="_blank" rel="noopener" href="https://golang.org/pkg/os/#Open">os.Open</a> 始终返回一个error，如果不是nil，则必是一个特定类型<a target="_blank" rel="noopener" href="https://golang.org/pkg/os/#PathError">*os.PathError</a>。</p>
<p>类似这样的情况在使用接口时都会出现。记住只要接口中存储了任何具体值，它就不会为nil。想了解更多信息，请参阅<a target="_blank" rel="noopener" href="https://blog.golang.org/laws-of-reflection">The Laws of Reflection</a></p>
<hr>
<p>代码示例：</p>
<iframe src="https://run.codetool.top/?id=41" frameborder="0" height="500" style="width:100%;border:1px solid #ccc;"></iframe>

<h2 id="Go语言中的常量是什么样的？">4.13 Go语言中的常量是什么样的？</h2><p>尽管Go语言对数字类型的变量之间的类型转换要求很严格, 常量却灵活多了。字面常量例如23，3.14159和<code>math.Pi</code>可以占用理想的内存空间、任意的精度，且不会上溢或下溢。例如<code>math.Pi</code>的值在源码中限定在63位，但涉及这个数的常量表达式却可以超过float64的计算精度。仅当这个常量或常量表达式被赋值给一个内存中的变量时，它才成为了一个“电子化”的数字并按照浮点数的标准舍去精度。</p>
<p>另外，因为他们只是数字，没有指定类型，所以Go语言中的常量比变量更容易使用，避免了类型转换问题的尴尬。你可以写这样的表达式：</p>
<pre class="language-go" data-language="go"><code class="language-go">sqrt2 <span class="token operator">:=</span> math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre>

<p>编译器不会报错，因为在调用<code>math.Sqrt</code>函数时可以把参数2安全地将类型、精度转换为float64.</p>
<p><a target="_blank" rel="noopener" href="https://blog.golang.org/constants">Constants</a> 这篇博客详细地探讨了该主题。</p>
<h2 id="64位机器上的int占用多大空间？">4.14 64位机器上的int占用多大空间？</h2><p><code>int</code>和<code>uint</code>的大小是独立实现的，但在一个给定的平台上占用的空间总是相同的，在32位机器上编译器使用32位整数，而64位机器上使用64位整数（尽管从历史上看，这不总是正确的）。为了实现可移植性，需要特定大小的值应该使用带有显式大小的类型，例如<code>int64</code>。。</p>
<p>另外，出于编程人员在使用浮点数时必须注意精度带来的影响的考虑，浮点数和复数的大小总是限定的（没有<code>float</code>或<code>complex</code>这两种基本类型）。浮点数字面量默认使用的类型是<code>float64</code>，例如<code>foo := 3.0</code>声明了一个<code>float64</code>的变量。如果要使用字面常量初始化一个<code>float32</code>的变量，必须通过下面的变量声明显式指定类型：</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> foo <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">3.0</span></code></pre>

<p>或者，你可以通过类型转换做到同样的效果：<code>foo := float32(3.0)</code></p>
<h2 id="如何知道变量是在堆上还是在栈上分配？">4.15 如何知道变量是在堆上还是在栈上分配？</h2><p>从程序正确性的角度来看，你不需要关心。只要保留有引用，Go语言中的每个变量都会持续存在。至于实际选择的存储位置不会影响编程时的语义。</p>
<p>然而了解存储位置确实对于编写高效的程序有帮助。Go编译器会尽可能在函数的私有堆栈帧中分配该函数的本地变量。但是，如果编译器无法证明函数返回后该变量就不会被引用，则编译器必须在堆上分配该变量，以避免悬空指针错误。同样，如果局部变量很大，则将其分配在堆而不是栈上可能更为合理。</p>
<p>在当前的编译器中，如果使用了变量的地址，则该变量大概率是在堆上分配。但是，基本的逃逸分析可以识别某些变量不会逃出函数作用范围的情况，此时变量可以分配在栈上。</p>
<h2 id="哪些操作是原子的？互斥量又是什么？">4.16 哪些操作是原子的？互斥量又是什么？</h2><p>Go语言并发操作相关的描述可以参阅文档<a target="_blank" rel="noopener" href="https://golang.org/ref/mem">Go Memory Model document</a>。</p>
<p>低级的同步和并发原语可以在<code>sync</code>和<code>sync/atomic</code>中找到。这两个包适用于一些简单的任务例如增加引用计数或保证小规模的互斥。</p>
<p>为了支持更高级别的操作，例如分布式服务器之间的协作，使用更高层次的技术可以方便写出更好的程序, Go语言通过gorountine和channel提供了对于这些的支持。 例如，你可以将你的程序构建成同一时间只有一个goroutine负责一块特定的数据处理。这种方法在<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=PAAkCSZUG1c">Go proverb</a>中有所介绍。</p>
<p><strong>不要通过共享内存来通信，你应该使用通过通信来共享内存。</strong></p>
<p>参阅<a target="_blank" rel="noopener" href="https://golang.org/ref/mem">Share Memory By Communicating</a>代码部分，还有它的<a target="_blank" rel="noopener" href="https://blog.golang.org/codelab-share">关联文章</a>是对于这一概念详细的讨论。</p>
<p>大型并发程序很可能会同时借助这两个工具包的功能。</p>
<h2 id="为什么goroutine没有ID">4.17 为什么goroutine没有ID?</h2><p>Goroutine没有名称，他们是无名工作者. 它们不向编程人员暴露出唯一标识符、名称或数据结构。有些人会对此感到惊奇，期望着之后会出现能返回一些能用来访问和控制goroutine的Go语句。</p>
<p>Goroutine是匿名的最根本的原因是，只有这样，在编写并发代码时，所有的Go语句都能被使用。否则在使用命名线程和goroutine的时候会限制于使用它们的库中。</p>
<p>这是一个命名goroutine造成复杂度的例证：一旦某个人对goroutine进行命名并围绕它创建了模型，它就变得非常特别，并且人们会倾向于将所有的计算任务与这个goroutine关联起来，而忽视了使用多个可能共享的goroutine进行处理的可能性。倘若 <code>net/http</code> 包为每一个request状态关联一个goroutine，客户端在处理一个请求时将不能使用更多的goroutine。</p>
<p>另外，在一些要求在主线程上处理所有计算的图形系统的库的经验表明，当在一个并发语言中部署时，这种情况的尴尬和局限性。特殊线程和goroutine的存在迫使编程人员对程序进行不必要的操作以避免操作了错误的线程而导致的崩溃和其他问题。</p>
<p>对于那些特定的goroutine确实尤为特别的情况，Go语言提供了一些诸如channel的功能，通过灵活使用它来与特定goroutine交互。</p>
<h2 id="为什么-和–是语句而不是表达式？为什么使用后缀而不是前缀？">4.18 为什么++和–是语句而不是表达式？为什么使用后缀而不是前缀？</h2><p>如果没有指针运算，则前缀和后缀增量运算符的便利性将会下降。将它们从表达式中彻底删除，可以简化表达式语法，并且还消除了围绕++和–的求值顺序的混乱问题（考虑<code>f(i++)</code>和<code>p[i] = q[++i]</code>）。简化的意义重大。而至于后缀和前缀，两者都可以正常工作，但后缀版本更传统。STL坚持使用前缀增量运算符，STL是一种语言的标准库，而具有讽刺意味的是，这种语言的名称包含后缀增量运算符。</p>
<p>博主注：解释一下，这里是一个冷笑话，因STL指的是C++的Standard Template Library（标准模板库），而C++的名称你懂的。</p>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://www.codetool.top" rel="external nofollow noreferrer">Rhett Peng</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。参考的网络来源均已尽可能地注明，部分参考来自他人的整理资料，无法标注，在此感谢！
                    <a href="https://www.codetool.top" target="_blank">Rhett Peng</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/GoLang/">
                                    <span class="chip bg-color">GoLang</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'VUmN3m0ICuwaL4jNPnxBRln8-gzGzoHsz',
        appKey: 'QH8FVT32jvi4qBllLg6Cf0dU',
        notify: 'false' === 'true',
        verify: 'true' === 'true',
        meta: ['nick','mail'],
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '说点什么吧'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/article/%E5%86%99%E7%BB%99Java%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%80%EF%BC%89/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/14.jpg" class="responsive-img" alt="写给Java程序员的Go语言学习指南（一）">
                        
                        <span class="card-title">写给Java程序员的Go语言学习指南（一）</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Hello我的读者们（假装有）好久不见，作为一个Javaer转Gopher已经有一段时间了，近期打算写一个对Java程序员友好的转型Go语言的系列文章（说不定有些人有这个需求呢），因为没有系统学习过Go语言，所以写这个系列的目的还包括巩固一
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-11-01
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="post-category">
                                    编程语言
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/GoLang/">
                        <span class="chip bg-color">GoLang</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/article/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4Java%E5%8F%AA%E6%9C%89%E5%80%BC%E4%BC%A0%E9%80%92%EF%BC%9F/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="为什么说Java只有值传递？">
                        
                        <span class="card-title">为什么说Java只有值传递？</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            先说一下。。以后可能不会怎么写Java相关的博客了，因为找到了字节跳动的实习工作，用Go/Python开发后端，所以这几天在抓紧时间学Go，在学Go的时候，了解到Go语言只有值传递，我突然就想起网上对Java是引用传递还是值传递有很多种说法
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-06-26
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="post-category">
                                    编程语言
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java/">
                        <span class="chip bg-color">Java</span>
                    </a>
                    
                    <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">
                        <span class="chip bg-color">基础知识</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>

    
<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019-2020</span>
            <a href="https://www.codetool.top" target="_blank">Rhett Peng</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">635.6k</span>&nbsp;字
            
            
            
            
            
            <br>
            
            <br>
            
            <span id="icp"><img src="/medias/icp.png" style="vertical-align: text-bottom;" />
                <a href="http://beian.miit.gov.cn/" target="_blank">赣ICP备19011928号</a>
            </span>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/codeband-top" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:pctdyx@qq.net" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=995632825" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 995632825" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/libs/prism/prism.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    

    

    

    

    

    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":200,"height":200,"hOffset":20,"vOffset":100},"mobile":{"show":false},"dialog":{"enable":true,"hitokoto":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
<div id="chat_input"><input id="question" type="text" placeholder="陪我聊聊天吧" onkeypress="return onKeyPress(event)"/></div>
</html>

<!--动态线条背景-->
<script type="text/javascript"
color="0,0,0" opacity='0.5' zIndex="-2" count="150" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>

<script>

//聊天框按回车
function onKeyPress(e){
    var keyCode = null;
    if(e.which)
        keyCode = e.which;
    else if(e.keyCode)
        keyCode = e.keyCode;
        
    //如果按下回车
    if(keyCode == 13) {
        // 1.获取界面上的元素value
        var question_box = document.getElementById('question')
        var question = question_box.value
        question_box.value = ""
        question_box.setAttribute("disabled","disabled")
        var api_key = "78c33a07808c7b9e1905c89c88b3be14"
        var api_secret = "q707tevnk00f"

        // 2.通过XHR发送一个POST请求
        var xhr = new XMLHttpRequest()
        xhr.open('GET','https://api.codetool.top/robottalk?question='+encodeURIComponent(question)+"&api_key="+api_key+"&api_secret="+api_secret)
		xhr.send(null)
		xhr.onload = function(){
            question_box.removeAttribute('disabled');
            var live2d_dialog = document.getElementsByClassName("live2d-widget-dialog")[0]
            live2d_dialog.style.opacity=1
            live2d_dialog.innerHTML = this.responseText
            window.setTimeout(()=>{
                live2d_dialog.style.opacity=0
            }, 5000);
		}
    }

}

</script>

<style> 
#chat_input{
    width: 200px;
    height: 40px;
    position: fixed;
    right: 0px;
    bottom: 80px;
    right: 20px;
} 

#question{
    border: none;
    border-bottom: 1px #aaaaaa solid;
    background-color: transparent;
    padding: 5px;
}

@media screen and (max-width: 960px) {
    #chat_input{
        display: none;
    }
    #live2d-widget{
        display: none;
    }
}
</style>